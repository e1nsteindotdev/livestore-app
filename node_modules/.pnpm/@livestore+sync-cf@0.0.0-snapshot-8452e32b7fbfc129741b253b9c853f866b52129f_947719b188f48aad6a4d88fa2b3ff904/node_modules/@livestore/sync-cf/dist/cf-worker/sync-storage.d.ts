import { UnexpectedError } from '@livestore/common';
import type { LiveStoreEvent } from '@livestore/common/schema';
import type { CfTypes } from '@livestore/common-cf';
import { Effect, Option } from '@livestore/utils/effect';
import { SyncMetadata } from '../common/sync-message-types.ts';
import { type Env, type StoreId } from './shared.ts';
export type SyncStorage = {
    dbName: string;
    getEvents: (cursor: number | undefined) => Effect.Effect<ReadonlyArray<{
        eventEncoded: LiveStoreEvent.AnyEncodedGlobal;
        metadata: Option.Option<SyncMetadata>;
    }>, UnexpectedError>;
    appendEvents: (batch: ReadonlyArray<LiveStoreEvent.AnyEncodedGlobal>, createdAt: string) => Effect.Effect<void, UnexpectedError>;
    resetStore: Effect.Effect<void, UnexpectedError>;
};
export declare const makeStorage: (ctx: CfTypes.DurableObjectState, env: Env, storeId: StoreId) => SyncStorage;
//# sourceMappingURL=sync-storage.d.ts.map