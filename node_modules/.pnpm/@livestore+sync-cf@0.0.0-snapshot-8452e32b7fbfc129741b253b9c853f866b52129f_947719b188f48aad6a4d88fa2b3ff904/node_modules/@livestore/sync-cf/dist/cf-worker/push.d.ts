import { UnexpectedError } from '@livestore/common';
import { EventSequenceNumber } from '@livestore/common/schema';
import type { CfTypes } from '@livestore/common-cf';
import { Effect, type Schema } from '@livestore/utils/effect';
import { SyncMessage } from '../common/mod.ts';
import { type MakeDurableObjectClassOptions, type RpcSubscription, type StoreId } from './shared.ts';
import type { SyncStorage } from './sync-storage.ts';
export declare const makePush: ({ storage, requestId, options, rpcSubscriptions, pushSemaphore, currentHeadRef, storeId, payload, ctx, respond, }: {
    options: MakeDurableObjectClassOptions | undefined;
    storage: SyncStorage;
    requestId: string;
    rpcSubscriptions: Map<StoreId, RpcSubscription>;
    pushSemaphore: Effect.Semaphore;
    currentHeadRef: {
        current: EventSequenceNumber.GlobalEventSequenceNumber | "uninitialized";
    };
    storeId: StoreId;
    payload: Schema.JsonValue | undefined;
    ctx: CfTypes.DurableObjectState;
    respond: (message: SyncMessage.BackendToClientMessage) => Effect.Effect<void, UnexpectedError>;
}) => (decodedMessage: Omit<SyncMessage.PushRequest, "_tag">) => Effect.Effect<void, UnexpectedError, never>;
//# sourceMappingURL=push.d.ts.map