import { SyncBackend } from '@livestore/common';
import { type DoRpcSyncOptions } from './transport/do-rpc.ts';
import { type WsSyncOptions } from './ws-impl.ts';
import type { SyncMetadata } from '../common/sync-message-types.ts';
export type TransportMode = 'http' | 'ws' | 'rpc';
export interface TransportConfig {
    mode: TransportMode;
    url: string;
}
export interface HttpTransportConfig extends TransportConfig {
    mode: 'http';
    headers?: Record<string, string>;
}
export interface WsTransportConfig extends TransportConfig {
    mode: 'ws';
    webSocketFactory?: WsSyncOptions['webSocketFactory'];
}
export interface RpcTransportConfig extends TransportConfig {
    mode: 'rpc';
    durableObjectStub: DoRpcSyncOptions['durableObjectStub'];
    clientId: string;
    durableObjectId: string;
}
export type SyncTransportConfig = HttpTransportConfig | WsTransportConfig | RpcTransportConfig;
/**
 * Factory function to create sync backends with different transport modes
 */
export declare const makeSyncBackend: (config: SyncTransportConfig) => SyncBackend.SyncBackendConstructor<SyncMetadata>;
/**
 * Utility function to determine transport mode from URL
 */
export declare const inferTransportMode: (url: string) => TransportMode;
/**
 * Convenience function to create sync backend from URL with automatic transport detection
 */
export declare const makeSyncBackendFromUrl: (url: string, options?: Partial<Omit<SyncTransportConfig, "url" | "mode">>) => SyncBackend.SyncBackendConstructor<SyncMetadata>;
//# sourceMappingURL=transport-factory.d.ts.map