{"version":3,"file":"OtlpTracer.js","names":["Cause","_interopRequireWildcard","require","Duration","Effect","Layer","Option","Tracer","Exporter","_OtlpResource","OtlpResource","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ATTR_EXCEPTION_TYPE","ATTR_EXCEPTION_MESSAGE","ATTR_EXCEPTION_STACKTRACE","make","exports","fnUntraced","options","otelResource","fromConfig","resource","scope","name","unsafeServiceName","exporter","label","url","headers","exportInterval","seconds","maxBatchSize","body","spans","data","resourceSpans","scopeSpans","shutdownTimeout","exportFn","span","push","makeOtlpSpan","parent","context","links","startTime","kind","makeSpan","status","_tag","attributes","Map","sampled","export","fiber","currentSpan","undefined","defaultContext","layer","unwrapScoped","map","setTracer","_","SpanProto","end","endTime","exit","attribute","key","value","event","events","addLinks","self","assign","create","isSome","traceId","generateId","spanId","len","chars","result","Math","floor","random","length","entriesToAttributes","entries","timeUnixNano","String","droppedAttributesCount","otelStatus","constOtelStatusSuccess","isInterruptedOnly","cause","code","StatusCode","Ok","message","pretty","errors","prettyErrors","firstError","Error","stringValue","boolValue","renderErrorCause","parentSpanId","SpanKind","startTimeUnixNano","endTimeUnixNano","droppedEventsCount","link","droppedLinksCount"],"sources":["../../src/OtlpTracer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}