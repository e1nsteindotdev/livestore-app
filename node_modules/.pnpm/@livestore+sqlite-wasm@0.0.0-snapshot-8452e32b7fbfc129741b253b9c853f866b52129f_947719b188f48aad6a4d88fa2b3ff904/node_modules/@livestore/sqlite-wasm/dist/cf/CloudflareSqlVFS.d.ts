import type { CfTypes } from '@livestore/common-cf';
import { FacadeVFS } from '../FacadeVFS.ts';
export interface SqlVfsOptions {
    maxFiles?: number;
    blockSize?: number;
}
/**
 * VFS implementation using Cloudflare Durable Object SQL storage as the backend.
 * This provides a synchronous VFS interface by leveraging SQL's synchronous API.
 *
 * Storage Strategy:
 * - Files are stored as blocks in SQL tables for efficient I/O
 * - File metadata stored in vfs_files table
 * - File data stored as fixed-size blocks in vfs_blocks table
 * - Synchronous operations via SQL's synchronous API
 *
 * Key advantages over async VFS:
 * - No async/await complexity
 * - Native SQL ACID properties
 * - Efficient range queries for file operations
 * - Built-in consistency and durability
 */
export declare class CloudflareSqlVFS extends FacadeVFS {
    #private;
    log: null;
    static create(name: string, sql: CfTypes.SqlStorage, module: any, options?: SqlVfsOptions): Promise<CloudflareSqlVFS>;
    constructor(name: string, sql: CfTypes.SqlStorage, module: any, options?: SqlVfsOptions);
    /**
     * Initialize the VFS by setting up SQL schema
     */
    isReady(): Promise<boolean>;
    jOpen(path: string, fileId: number, flags: number, pOutFlags: DataView): number;
    jClose(fileId: number): number;
    jRead(fileId: number, buffer: Uint8Array, offset: number): number;
    jWrite(fileId: number, data: Uint8Array, offset: number): number;
    jTruncate(fileId: number, size: number): number;
    jSync(fileId: number, _flags: number): number;
    jFileSize(fileId: number, pSize64: DataView): number;
    jDelete(path: string, _syncDir: number): number;
    jAccess(path: string, _flags: number, pResOut: DataView): number;
    jSectorSize(_fileId: number): number;
    jDeviceCharacteristics(_fileId: number): number;
    getStats(): {
        activeFiles: number;
        openFiles: number;
        maxFiles: number;
        blockSize: number;
        totalStoredBytes: number;
    };
}
//# sourceMappingURL=CloudflareSqlVFS.d.ts.map