import type { CfTypes } from '@livestore/common-cf';
import { FacadeVFS } from '../FacadeVFS.ts';
/**
 * VFS implementation using Cloudflare DurableObjectStorage as the backend.
 * Uses chunked storage with in-memory caching for synchronous operations.
 *
 * Storage Strategy:
 * - Files are split into 64 KiB chunks for optimal SQLite I/O patterns
 * - Metadata cached in memory for synchronous access
 * - LRU cache for frequently accessed chunks
 *
 * Key Schema:
 * - file:${path}:meta - File metadata (size, flags, chunkCount, created)
 * - file:${path}:${chunkIndex} - File data chunks (64 KiB max)
 * - index:files - Set of active file paths
 */
export declare class CloudflareWorkerVFS extends FacadeVFS {
    #private;
    log: null;
    static create(name: string, storage: CfTypes.DurableObjectStorage, module: any): Promise<CloudflareWorkerVFS>;
    constructor(name: string, storage: CfTypes.DurableObjectStorage, module: any);
    jOpen(zName: string, fileId: number, flags: number, pOutFlags: DataView): number;
    jClose(fileId: number): number;
    jRead(fileId: number, pData: Uint8Array, iOffset: number): number;
    jWrite(fileId: number, pData: Uint8Array, iOffset: number): number;
    jTruncate(fileId: number, iSize: number): number;
    jSync(fileId: number, _flags: number): number;
    jFileSize(fileId: number, pSize64: DataView): number;
    jSectorSize(_fileId: number): number;
    jDeviceCharacteristics(_fileId: number): number;
    jAccess(zName: string, _flags: number, pResOut: DataView): number;
    jDelete(zName: string, _syncDir: number): number;
    close(): Promise<void>;
    isReady(): Promise<boolean>;
    /**
     * Returns the number of SQLite files in the file system.
     */
    getSize(): number;
    /**
     * Returns the maximum number of SQLite files the file system can hold.
     */
    getCapacity(): number;
    /**
     * Increase the capacity of the file system by n.
     */
    addCapacity(n: number): Promise<number>;
    /**
     * Decrease the capacity of the file system by n. The capacity cannot be
     * decreased to fewer than the current number of SQLite files in the
     * file system.
     */
    removeCapacity(n: number): Promise<number>;
    /**
     * Flush all pending writes and sync to storage.
     * This is useful for ensuring durability before critical operations.
     */
    syncToStorage(): Promise<void>;
    /**
     * Get statistics about the VFS for debugging and monitoring.
     */
    getStats(): {
        activeFiles: number;
        openFiles: number;
        cachedChunks: number;
        cachedMetadata: number;
        pendingWrites: number;
        maxFiles: number;
        maxCacheSize: number;
        chunkSize: number;
    };
}
//# sourceMappingURL=CloudflareWorkerVFS.d.ts.map