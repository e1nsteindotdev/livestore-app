import { Option, Schema, } from '@livestore/utils/effect';
export const PullResPageInfo = Schema.Union(Schema.TaggedStruct('MoreUnknown', {}), Schema.TaggedStruct('MoreKnown', {
    remaining: Schema.Number,
}), Schema.TaggedStruct('NoMore', {}));
export const pageInfoNoMore = { _tag: 'NoMore' };
export const pageInfoMoreUnknown = { _tag: 'MoreUnknown' };
export const pageInfoMoreKnown = (remaining) => ({ _tag: 'MoreKnown', remaining });
export const pullResItemEmpty = () => ({
    batch: [],
    pageInfo: pageInfoNoMore,
});
export const of = (obj) => obj;
/**
 * Useful to continue pulling from the last event in the batch.
 */
export const cursorFromPullResItem = (item) => {
    const lastEvent = item.batch.at(-1);
    if (!lastEvent) {
        return Option.none();
    }
    return Option.some({ cursor: lastEvent.eventEncoded.seqNum, metadata: lastEvent.metadata });
};
//# sourceMappingURL=sync-backend.js.map