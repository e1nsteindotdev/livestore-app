{"version":3,"file":"ShardManager.js","names":["Rpc","_interopRequireWildcard","require","RpcClient","RpcGroup","RpcServer","Arr","Clock","Config_","ConfigProvider","Context","Data","Deferred","Duration","Effect","Equal","FiberSet","_Function","Iterable","Layer","Mailbox","Metric","MetricLabel","MutableHashMap","MutableHashSet","Option","PubSub","Queue","Schedule","Schema","_ClusterError","ClusterMetrics","_shardManager","MachineId","_Runner","_RunnerAddress","_RunnerHealth","_Runners","_ShardId","_ShardingConfig","_ShardStorage","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ShardManager","Tag","exports","Config","defaults","rebalanceDebounce","seconds","rebalanceInterval","rebalanceRetryInterval","rebalanceRate","persistRetryCount","persistRetryInterval","runnerHealthCheckInterval","minutes","runnerPingTimeout","configConfig","all","duration","pipe","withDefault","withDescription","number","integer","configFromEnv","withConfigProvider","fromEnv","constantCase","layerConfig","config","succeed","layerConfigFromEnv","effect","map","env","ShardManagerClient","ShardingEventSchema","Union","TaggedStruct","address","RunnerAddress","shards","Array","ShardId","Rpcs","make","payload","runner","Runner","success","Tuple","stream","Number","ShardingEvent","taggedEnum","makeClientLocal","gen","ShardingConfig","clock","groups","Set","empty","machineId","of","register","_","groupsToAdd","sync","group","add","shardsPerGroup","makeShardId","runnerAddress","unregister","void","notifyUnhealthyRunner","getAssignments","shardingEvents","mailbox","offer","StreamStarted","getTime","currentTimeMillis","makeClientRpc","client","spanPrefix","disableTracing","Register","version","serverVersion","orDie","Unregister","NotifyUnhealthyRunner","GetAssignments","tap","fnUntraced","events","ShardingEvents","asMailbox","take","takeAll","unsafeOfferAll","mb","into","forkScoped","GetTime","layerClientLocal","layerClientRpc","scoped","provide","Protocol","clientProtocol","RpcClientProtocol","shardManagerAddress","storage","ShardStorage","runnersApi","Runners","runnerHealthApi","RunnerHealth","shardingConfig","state","State","fromStorage","scope","unbounded","updateRunnerMetrics","runners","unsafeUpdate","size","allRunners","updateShardMetrics","stats","shardStats","shardCount","perRunner","assignedShards","unassignedShards","unassigned","withRetry","retry","schedule","spaced","times","ignore","persistRunners","unsafeMakeSemaphore","withPermits","suspend","saveRunners","persistAssignments","saveAssignments","assignments","isAlive","logWarning","toString","updateShardsState","isSome","value","fail","RunnerNotRegistered","addAssignments","logInfo","pretty","current","filter","addRunner","unsafeCurrentTimeMillis","publish","RunnerRegistered","forkIn","rebalance","unassignments","shard","equals","push","none","removeRunner","length","RunnerUnregistered","rebalancing","rebalanceDeferred","rebalanceFibers","withFiberRuntime","fiber","rebalanceLoop","unsafeMake","id","await","deferred","undefined","runRebalance","intoDeferred","identity","onExit","sleep","logDebug","changes","keys","groupAssignments","groupUnassignments","groupChanges","decideAssignmentsForShards","addAllNested","from","increment","rebalances","failedRunners","run","ping","timeout","catchAll","remove","awaitEmpty","failedUnassignments","matchEffect","onFailure","onSuccess","ShardsUnassigned","forEach","some","ShardsAssigned","wereFailures","discard","zipRight","withSpan","captureStackTrace","checkRunnerHealth","concurrency","addFinalizer","catchAllCause","cause","andThen","forever","queue","subscribe","layer","layerServerHandlers","toLayer","shardManager","takeBetween","MAX_SAFE_INTEGER","flatMap","offerAll","layerServer"],"sources":["../../src/ShardManager.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}