{"version":3,"file":"Sharding.js","names":["RpcClient","_interopRequireWildcard","require","_RpcMessage","Arr","Cause","Context","Deferred","Effect","Equal","Exit","Fiber","FiberHandle","FiberMap","FiberRef","_Function","HashMap","Iterable","Layer","MutableHashMap","MutableHashSet","MutableRef","Option","Predicate","PubSub","Schedule","Scope","Stream","_ClusterError","_ClusterSchema","ClusterSchema","_EntityAddress","_EntityId","Envelope","EntityManager","_entityReaper","_hash","_interruptors","_resourceMap","Message","MessageStorage","Reply","_Runners","_ShardId","_ShardingConfig","_ShardingRegistrationEvent","_ShardManager","_ShardStorage","_SingletonAddress","Snowflake","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Sharding","Tag","exports","make","gen","config","ShardingConfig","runners","Runners","shardManager","ShardManagerClient","snowflakeGen","Generator","shardingScope","scope","isShutdown","storage","storageEnabled","noop","shardStorage","ShardStorage","entityManagers","Map","shardAssignments","empty","selfShards","acquiredShards","activeShardsLatch","makeLatch","events","unbounded","getRegistrationEvents","fromPubSub","isLocalRunner","address","isSome","runnerAddress","equals","value","getShardId","entityId","group","id","Math","abs","hashString","shardsPerGroup","ShardId","disableValidation","isEntityOnLocalShards","shardId","selfAddress","addFinalizerExit","ignore","releaseAll","releasingShards","await","remove","add","unacquiredShards","size","forkIn","syncSingletons","releaseShards","close","acquired","acquire","resetShards","length","storageReadLatch","open","sleep","pipe","catchAllCause","cause","logWarning","repeat","spaced","entityMessagePollInterval","annotateLogs","package","module","fiber","runner","interruptible","suspend","refresh","flatMap","some","_","symbol","andThen","void","retry","times","schedule","logError","clearSelfShards","delay","forever","releaseShardsLock","unsafeMakeSemaphore","withPermits","forEach","values","state","manager","interruptShard","concurrency","discard","release","clear","singletons","singletonFibers","withSingletonLock","registerSingleton","fnUntraced","name","run","options","shardGroup","SingletonAddress","EntityId","map","dieMessage","context","wrappedRun","locally","currentLogAnnotations","never","scoped","provide","orDie","publish","SingletonRegistered","logDebug","running","unsafeHas","shouldBeRunning","internalInterruptors","fiberId","openStorageReadLatch","constant","storageReadLock","withStorageReadLock","storageAlreadyProcessed","_message","sentRequestIds","Set","sentRequestIdSets","addFinalizer","message","envelope","requestId","entityType","isProcessingFor","excludeReplies","unsafeClose","take","messages","unprocessedMessages","currentSentRequestIds","send","index","_tag","respond","ReplyWithContext","fromDefect","unsafeNext","defect","EntityNotManagedByRunner","isProcessing","resumptionState","entityResumptionState","unprocessed","interrupts","error","failureOption","isNone","saveReply","squash","resumeEntityFromStorage","whileLoop","while","step","body","oldest","unsafeHead","delete","ensuring","lastReceivedMessage","resumeEntityFromStorageImpl","getOrThrow","done","messageIds","push","unprocessedMessagesById","sendWithRetry","catchTags","fail","EntityNotAssignedToRunner","interrupt","MailboxFull","sendRetryInterval","AlreadyProcessingMessage","sync","effect","entity","sendLocal","simulateRemoteSerialization","notifyLocal","notify","envelopeId","isTransientError","or","RunnerUnavailable","is","sendOutgoing","retries","catchIf","maybeRunner","isPersisted","rpc","annotations","Persisted","runnerIsLocal","die","reset","clearReplies","matchCause","onSuccess","onFailure","shardManagerTimeoutFiber","extend","startShardManagerTimeout","shardManagerUnavailableTimeout","onlyIfMissing","stopShardManagerTimeout","machineId","register","shardGroups","setMachineId","mailbox","shardingEvents","startedLatch","eventsFiber","takeAll","event","shard","shards","intoDeferred","forkScoped","syncFiber","syncAssignments","refreshAssignmentsInterval","joinAll","zipRight","exponential","union","assignments","getAssignments","clientRequests","clients","ResourceMap","client","makeNoSerialization","protocol","spanPrefix","type","disableTracing","ClientTracingEnabled","supportsAck","generateRequestId","RequestId","flatten","onFromClient","unsafeGet","ClientAddressTag","getCurrentFiber","requests","tag","entry","currentContext","makeClientRespond","write","clientRespondDiscard","OutgoingRequest","makeRequest","payload","headers","traceId","spanId","sampled","lastReceivedReply","none","OutgoingEnvelope","AckChunk","replyId","lastChunkId","Uninterruptible","isTransientInterrupt","interruptors","Interrupt","withFiberRuntime","EntityAddress","getShardGroup","clientFn","merge","proxyClient","Proxy","p","target","undefined","makeClient","_reply","reply","clientId","exit","reaper","EntityReaper","registerEntity","build","sharding","EntityRegistered","unregister","activeEntityCount","count","of","pollStorage","layer","layerGenerator","Default","GenericTag"],"sources":["../../src/Sharding.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}