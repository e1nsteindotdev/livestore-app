import type { UnexpectedError } from '@livestore/common';
import { type LiveStoreSchema, type Store, type Unsubscribe } from '@livestore/livestore';
import type * as CfSyncBackend from '@livestore/sync-cf/cf-worker';
import { Effect } from '@livestore/utils/effect';
import type * as CfWorker from './cf-types.ts';
export type MakeDurableObjectClassOptions<TSchema extends LiveStoreSchema = LiveStoreSchema.Any> = {
    schema: TSchema;
    clientId: string;
    sessionId: string;
    onStoreReady?: (store: Store<TSchema>) => Effect.SyncOrPromiseOrEffect<void, UnexpectedError>;
    registerQueries?: (store: Store<TSchema>) => Effect.SyncOrPromiseOrEffect<ReadonlyArray<Unsubscribe>>;
    syncBackendUrl?: string;
    handleCustomRequest?: (request: CfWorker.Request, ensureStore: Effect.Effect<Store<TSchema>, UnexpectedError, never>) => Effect.SyncOrPromiseOrEffect<CfWorker.Response | undefined, UnexpectedError>;
};
export type Env = {
    SYNC_BACKEND_DO: CfWorker.DurableObjectNamespace;
};
export type MakeDurableObjectClass = <TSchema extends LiveStoreSchema = LiveStoreSchema.Any>(options: MakeDurableObjectClassOptions<TSchema>) => {
    new (ctx: CfWorker.DurableObjectState, env: Env): CfWorker.DurableObject & CfWorker.Rpc.DurableObjectBranded;
};
export type CreateStoreDoOptions<TSchema extends LiveStoreSchema = LiveStoreSchema.Any> = {
    schema: TSchema;
    storeId: string;
    clientId: string;
    sessionId: string;
    storage: CfWorker.DurableObjectStorage;
    syncBackendDurableObject: CfWorker.DurableObjectStub<CfSyncBackend.SyncBackendRpcInterface>;
    durableObjectId: string;
    bindingName: string;
    livePull?: boolean;
};
export declare const createStoreDo: <TSchema extends LiveStoreSchema = LiveStoreSchema.Any>({ schema, storeId, clientId, sessionId, storage, syncBackendDurableObject, durableObjectId, bindingName, livePull, }: CreateStoreDoOptions<TSchema>) => Effect.Effect<Store<TSchema, {}>, UnexpectedError, never>;
export declare const createStoreDoPromise: <TSchema extends LiveStoreSchema = LiveStoreSchema.Any>(options: CreateStoreDoOptions<TSchema>) => Promise<Store<TSchema, {}>>;
//# sourceMappingURL=make-client-durable-object.d.ts.map